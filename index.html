<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>End Term - 150 Questions (Java & Spring)</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ec4899;--muted:#94a3b8;--correct:#16a34a;--wrong:#ef4444}
    body{font-family:Inter,Segoe UI,Roboto,system-ui,Arial;background:linear-gradient(180deg,#0a1020 0%,#12071c 100%);color:#fce7f3;margin:0;padding:24px}
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    h1{margin:0;font-size:22px;color:#f472b6}
    p.lead{margin:0;color:var(--muted)}
    .question-card{background:var(--card);border-radius:12px;padding:14px;margin:12px 0;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .qmeta{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .qnum{font-weight:600;color:#f9a8d4}
    .options{display:grid;grid-template-columns:1fr;gap:8px}
    .opt{background:#1e1030;padding:10px;border-radius:8px;cursor:pointer;border:1px solid transparent}
    .opt.disabled{opacity:0.7;pointer-events:none}
    .opt.correct{border-color:rgba(22,163,74,0.35);box-shadow:0 6px 12px rgba(16,185,129,0.06)}
    .opt.wrong{border-color:rgba(239,68,68,0.25);box-shadow:0 6px 12px rgba(239,68,68,0.04)}
    .feedback{margin-top:8px;font-weight:600}
    footer{display:flex;justify-content:space-between;align-items:center;margin-top:18px}
    button{background:var(--accent);border:none;padding:9px 14px;border-radius:10px;color:#fff;cursor:pointer;font-weight:700}
    .score{font-weight:700}
    .small{font-size:13px;color:var(--muted)}
    .progress{height:10px;background:#1e1630;border-radius:999px;overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,var(--accent),#f472b6);width:0%}
    .controls{display:flex;gap:8px}
    @media (max-width:640px){.container{padding:8px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>End Term Quiz ‚Äî 150 Questions (For My Cutie ‚ù§Ô∏è)</h1>
        <p class="lead">Harder set added just for you üíï ‚Äî all still from syllabus. Select carefully, cutie! Immediate feedback will be shown. At the end click <strong>Show Final Score</strong>.</p>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div class="small">Questions answered: <span id="answeredCount">0</span>/150</div>
        <div class="progress" style="width:180px;margin-top:8px"><div class="bar" id="progressBar"></div></div>
      </div>
    </header>

    <main id="quiz"></main>

    <footer>
      <div class="controls">
        <button id="showScore">Show Final Score</button>
        <button id="resetBtn" style="background:#334155;color:#fff">Reset Quiz</button>
      </div>
      <div class="score" id="finalScore">Score: 0 / 150</div>
    </footer>
  </div>

<script>
// existing 100 questions (truncated here for brevity in code editing)
const baseQuestions = [
  {q:"1. Which keyword is used to inherit a class in Java?", opts:["implements","extends","inherits","super"], a:1},
  // ... (same 100 as before)
  {q:"100. Which is recommended for building REST APIs quickly with Spring?", opts:["Raw Servlets","Spring Boot with Spring MVC","Desktop apps","Manual socket programming"], a:1}
];

// 50 harder syllabus-based questions
const extraQuestions = [
  {q:"101. In Java Memory Model, what does 'happens-before' relationship guarantee?", opts:["Atomic execution","Visibility and ordering of operations","Thread priority","Deadlock freedom"], a:1},
  {q:"102. Difference between fail-fast and fail-safe iterators?", opts:["Fail-fast throw ConcurrentModificationException, fail-safe work on copy","Fail-fast never throws, fail-safe throws","Both same","Only fail-fast supported"], a:0},
  {q:"103. Which concurrency class supports lock-free thread-safe counters?", opts:["AtomicInteger","ReentrantLock","Semaphore","CountDownLatch"], a:0},
  {q:"104. Which Maven lifecycle phase runs integration tests?", opts:["compile","test","integration-test","verify"], a:2},
  {q:"105. What is the difference between checked and unchecked exceptions?", opts:["Checked must be declared/handled, unchecked are subclasses of RuntimeException","Unchecked must be declared","Both same","None"], a:0},
  {q:"106. Which Stream operation short-circuits?", opts:["map","filter","findFirst","forEach"], a:2},
  {q:"107. Difference between @Component, @Service, and @Repository?", opts:["No difference","Semantic roles for different layers","Service and Repository are deprecated","All are Controller"], a:1},
  {q:"108. In Spring AOP, what does JoinPoint represent?", opts:["Location in execution of program","Only classes","Database query","Only annotations"], a:0},
  {q:"109. Which transaction propagation creates a new transaction always?", opts:["REQUIRED","REQUIRES_NEW","SUPPORTS","MANDATORY"], a:1},
  {q:"110. Difference between eager and lazy initialization of Spring beans?", opts:["Lazy only in Hibernate","Eager created at startup, lazy created when needed","Both same","Lazy not supported"], a:1},
  {q:"111. Which Hibernate caching level is Session-specific?", opts:["Level 1","Level 2","Query cache","Distributed cache"], a:0},
  {q:"112. What problem does N+1 select issue represent in ORM?", opts:["Too many joins","One query followed by N queries per record","Deadlocks","Incorrect mapping"], a:1},
  {q:"113. In microservices, what pattern centralizes authentication and authorization?", opts:["API Gateway","Circuit Breaker","CQRS","Observer"], a:0},
  {q:"114. Which Spring annotation allows scheduling tasks?", opts:["@Scheduled","@Timer","@ScheduleTask","@Async"], a:0},
  {q:"115. Which HTTP caching header defines freshness lifetime?", opts:["Expires","Cache-Control","ETag","Last-Modified"], a:1},
  {q:"116. What does @EnableDiscoveryClient enable?", opts:["Service registry discovery like Eureka","JPA","Transactions","File upload"], a:0},
  {q:"117. In JDBC, what is the difference between executeQuery() and executeUpdate()?", opts:["Query for select returns ResultSet, Update for DML returns int count","No difference","Both return boolean","Update is deprecated"], a:0},
  {q:"118. What is @ControllerAdvice used for?", opts:["Global exception handling and advice","Database config","Service layer","Dependency injection"], a:0},
  {q:"119. In Maven, what is the scope of a dependency used only at compile time but not at runtime?", opts:["compile","provided","runtime","test"], a:1},
  {q:"120. What is @Qualifier used for with @Autowired?", opts:["Selecting which bean to inject when multiple candidates","Validation","Transaction control","Serialization"], a:0},
  {q:"121. Difference between HashMap and ConcurrentHashMap?", opts:["ConcurrentHashMap is synchronized and thread-safe","HashMap is faster always","Both same","HashMap allows null keys, ConcurrentHashMap does not"], a:0},
  {q:"122. Which annotation marks a method to be run after bean creation?", opts:["@Init","@PostConstruct","@After","@Bean"], a:1},
  {q:"123. In JUnit, which annotation runs before all test methods in a class?", opts:["@Before","@BeforeClass","@Setup","@Init"], a:1},
  {q:"124. What does @EntityListeners do in JPA?", opts:["Adds entity lifecycle callbacks","Defines DB schema","Manages transactions","Configures fetch"], a:0},
  {q:"125. Which Maven goal installs artifact into local repository?", opts:["mvn build","mvn install","mvn package","mvn deploy"], a:1},
  {q:"126. Which scope creates a bean per HTTP request?", opts:["singleton","prototype","request","session"], a:2},
  {q:"127. What is cascading in Hibernate?", opts:["Automatic propagation of operations (persist, remove) to related entities","Deadlock resolution","Lazy loading","Query optimization"], a:0},
  {q:"128. What is difference between Mono and Flux in Spring WebFlux?", opts:["Mono represents 0..1 elements, Flux 0..N elements","Flux single, Mono multiple","Both same","Mono is deprecated"], a:0},
  {q:"129. Which design pattern is Dependency Injection based on?", opts:["Strategy","Observer","Inversion of Control","Factory"], a:2},
  {q:"130. Which annotation enables transaction management in Spring?", opts:["@EnableTransactionManagement","@Transactional","@Transaction","@EnableTx"], a:0},
  {q:"131. What is difference between PUT and PATCH?", opts:["PUT replaces entire resource, PATCH modifies partial","PATCH replaces, PUT modifies","Both same","PATCH is deprecated"], a:0},
  {q:"132. Which algorithm is used by ConcurrentHashMap for partitioning?", opts:["Segmentation/striped locking","Single global lock","Copy-on-write","Skip list"], a:0},
  {q:"133. Which JPA annotation defines unique constraint?", opts:["@Unique","@Column(unique=true)","@Constraint","@Index"], a:1},
  {q:"134. Which spring-boot-starter is used for testing?", opts:["spring-boot-starter-test","spring-boot-starter-data","spring-boot-starter-web","spring-boot-starter-jdbc"], a:0},
  {q:"135. What is backpressure in reactive streams?", opts:["Mechanism to handle data flow when consumer slower than producer","Deadlock","Lock-free queue","Cache refresh"], a:0},
  {q:"136. What is @ResponseStatus used for?", opts:["Custom HTTP status for exceptions or responses","Transaction status","Bean scope","Thread status"], a:0},
  {q:"137. Difference between save() and persist() in JPA?", opts:["persist guarantees managed state, save may not","save is newer","both identical","persist deprecated"], a:0},
  {q:"138. Which Spring annotation makes a bean lazy?", opts:["@Lazy","@Deferred","@OnDemand","@Scope(lazy)"], a:0},
  {q:"139. In Spring, what is proxy target class mode?", opts:["Force use of CGLIB proxy for classes","Disable proxies","Use JDK dynamic proxy only","Bean factory proxy"], a:0},
  {q:"140. Which part of OSI model does HTTP work on?", opts:["Transport","Application","Network","Session"], a:1},
  {q:"141. Which collection guarantees sorted order with natural ordering?", opts:["HashSet","TreeSet","LinkedHashSet","ArrayList"], a:1},
  {q:"142. What is @SpringBootTest used for?", opts:["Unit testing only","Integration testing with Spring context","REST client","Database config"], a:1},
  {q:"143. Which testing library is used for load testing in syllabus?", opts:["JUnit","JMeter","Mockito","Selenium"], a:1},
  {q:"144. Which pattern does Spring MVC implement?", opts:["Front Controller","Observer","Builder","Factory"], a:0},
  {q:"145. In Streams, what is difference between intermediate and terminal operations?", opts:["Intermediate return Stream, terminal produce non-Stream result","Terminal return Stream","Both same","Terminal always void"], a:0},
  {q:"146. Which Spring Boot feature reduces configuration by convention?", opts:["AutoConfiguration","Dependency Injection","AOP","Actuator"], a:0},
  {q:"147. What does @EntityGraph help with in JPA?", opts:["Controlling fetch plans","Transaction isolation","Cache config","Schema migration"], a:0},
  {q:"148. What is role of DispatcherServlet in Spring MVC?", opts:["Front controller handling all requests","Database connection","Bean factory","Transaction manager"], a:0},
  {q:"149. What does @MockBean annotation do in Spring Boot tests?", opts:["Provides Mockito mock and injects into ApplicationContext","Marks as fake","Stub only","Disables bean"], a:0},
  {q:"150. Which Spring annotation is used for asynchronous method execution?", opts:["@Async","@Asynchronous","@Threaded","@Parallel"], a:0}
];

const questions = baseQuestions.concat(extraQuestions);

const quizEl = document.getElementById('quiz');
let answered = 0, score = 0;

function render(){
  questions.forEach((item, idx) => {
    const card = document.createElement('div');
    card.className = 'question-card';
    card.id = 'q'+(idx+1);
    card.innerHTML = `
      <div class="qmeta"><div class="qnum">Q${idx+1}. ${item.q}</div><div class="small">Question ${idx+1} / ${questions.length}</div></div>
      <div class="options" id="opts-${idx}"></div>
      <div class="feedback" id="fb-${idx}"></div>
    `;
    quizEl.appendChild(card);

    const optsEl = document.getElementById('opts-'+idx);
    item.opts.forEach((opt, oi) => {
      const btn = document.createElement('div');
      btn.className = 'opt';
      btn.tabIndex = 0;
      btn.dataset.q = idx;
      btn.dataset.o = oi;
      btn.innerText = String.fromCharCode(65+oi)+') ' + opt;
      btn.addEventListener('click', onSelect);
      btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') onSelect.call(btn,e); });
      optsEl.appendChild(btn);
    });
  });
}

function onSelect(e){
  const el = this === window ? e.currentTarget : this;
  const qIdx = Number(el.dataset.q);
  const optIdx = Number(el.dataset.o);
  const fb = document.getElementById('fb-'+qIdx);
  const optsContainer = document.getElementById('opts-'+qIdx);
  if(optsContainer.classList.contains('answered')) return;

  optsContainer.classList.add('answered');
  answered++;
  document.getElementById('answeredCount').innerText = answered;
  const progressPercent = Math.round((answered / questions.length) * 100);
  document.getElementById('progressBar').style.width = progressPercent + '%';

  const correctIndex = questions[qIdx].a;
  const children = Array.from(optsContainer.children);
  children.forEach((c,i)=>{
    c.classList.add('disabled');
    if(i===correctIndex){ c.classList.add('correct'); }
    if(i===optIdx && i !== correctIndex){ c.classList.add('wrong'); }
  });

  if(optIdx === correctIndex){ score++; fb.innerText = 'Correct ‚úÖ Good job cutie!'; fb.style.color = 'var(--correct)'; }
  else { fb.innerText = 'Wrong ‚ùå ‚Äî Correct answer: ' + String.fromCharCode(65+correctIndex) + ') ' + questions[qIdx].opts[correctIndex]; fb.style.color = 'var(--wrong)'; }

  document.getElementById('finalScore').innerText = `Score: ${score} / ${questions.length}`;
}

document.getElementById('showScore').addEventListener('click', ()=>{
  for(let i=0;i<questions.length;i++){
    const optsContainer = document.getElementById('opts-'+i);
    const fb = document.getElementById('fb-'+i);
    if(!optsContainer.classList.contains('answered')){
      optsContainer.classList.add('answered');
      answered++;
      document.getElementById('answeredCount').innerText = answered;
      const correctIndex = questions[i].a;
      const children = Array.from(optsContainer.children);
      children.forEach((c,ci)=>{
        c.classList.add('disabled');
        if(ci===correctIndex) c.classList.add('correct');
      });
      fb.innerText = 'Not answered ‚Äî Correct: '+ String.fromCharCode(65+correctIndex)+') '+questions[i].opts[correctIndex];
      fb.style.color = 'var(--muted)';
    }
  }
  document.getElementById('finalScore').innerText = `Final Score: ${score} / ${questions.length}`;
  document.getElementById('progressBar').style.width = '100%';
});

// reset functionality
document.getElementById('resetBtn').addEventListener('click', ()=>{
  if(!confirm('Reset all answers and score?')) return;
  quizEl.innerHTML='';
  answered=0; score=0;
  document.getElementById('answeredCount').innerText=0;
  document.getElementById('finalScore').innerText='Score: 0 / '+questions.length;
  document.getElementById('progressBar').style.width='0%';
  render();
});

// render quiz at startup
render();
</script>
</body>
</html>

